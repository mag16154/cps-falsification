%% 4 dimensional nonlinear system with dynamics%% r = vr, theta = vt, vr = r.(vt)*2 + g*cos(theta)-k*(r-L), vt = -(2*vr*vt+g*sin(theta))/rclear all;clc;no_of_dims = 4no_of_trajs = 10traj_combs = combnk(1:no_of_trajs,2)[no_of_samples, dim2] = size(traj_combs);first_dim_init_vals = rand(no_of_samples,1)*0.02+1.19;second_dim_init_vals = rand(no_of_samples,1)*0.02+0.49;init_state_array = zeros(no_of_samples,no_of_dims);for idx=1:no_of_samples    init_state_array(idx,1) = first_dim_init_vals(idx);    init_state_array(idx,2) = second_dim_init_vals(idx);    init_state_array(idx,3) = 0;    init_state_array(idx,4) = 0;end%% Timetspan = 0:0.01:10;%% Integration/Simulationaddpath('./TwoLayers/.');tspan = 0:0.01:10;%% Integration/Simulationfor idx = 1:no_of_samples	init_state = init_state_array(idx,:);	[t x] = ode45(@dxdt,tspan,init_state);	traj_t(:,idx) = t;	traj_x(:,:,idx) = x;end[time_steps elems] = size(traj_t);epochs = 100;neurons = 25;for idx = 0:3	jump = 2.^idx;	[inputSeries, targetSeries] = createNNInput(traj_x, time_steps, no_of_dims, traj_combs, jump);	[net, output_mat, target_mat] = trainAndTestNN(inputSeries, targetSeries, epochs, neurons);	%[v_mse] = validateNN(net, traj_x, time_steps, no_of_dims, traj_combs);endplotFigures(output_mat, target_mat, no_of_dims, 'Spring Pendulum');% ============================================================================================% dvdt% ============================================================================================function dv = dxdt(t,v)%%% parameter set 1k=2;L=1;g=9.8;%%% variablesr=v(1);theta=v(2);vr=v(3);vt=v(4);%%% equationsdv = [   vr; %dr/dt   vt; %dtheta/dt   r*(vt.^2) + g*cos(theta)-k*(r-L); %dvr/dt   -(2*vr*vt+g*sin(theta))/r; %dvt/dt] ;end